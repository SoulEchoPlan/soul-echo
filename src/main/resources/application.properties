# Server Configuration
server.port=${SERVER_PORT:8080}
server.servlet.context-path=/

# Database Configuration
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:soul_echo_db}?useSSL=false&serverTimezone=UTC&characterEncoding=utf8&allowPublicKeyRetrieval=true
spring.datasource.username=${DB_USERNAME:your_username}
spring.datasource.password=${DB_PASSWORD:your_password}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection pool settings
spring.datasource.hikari.maximum-pool-size=${DB_POOL_MAX_SIZE:20}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:5}
spring.datasource.hikari.idle-timeout=${DB_POOL_IDLE_TIMEOUT:300000}
spring.datasource.hikari.connection-timeout=${DB_POOL_CONNECTION_TIMEOUT:20000}

# Flyway Configuration
spring.flyway.enabled=${FLYWAY_ENABLED:true}
spring.flyway.locations=${FLYWAY_LOCATIONS:classpath:db/migration}
spring.flyway.baseline-on-migrate=${FLYWAY_BASELINE_ON_MIGRATE:true}
spring.flyway.baseline-version=${FLYWAY_BASELINE_VERSION:0}
spring.flyway.validate-on-migrate=${FLYWAY_VALIDATE_ON_MIGRATE:true}

# JPA Configuration
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false

# WebSocket Configuration
# WebSocket message size limits (for audio streaming)
spring.websocket.message-size-limit=${WEBSOCKET_MESSAGE_SIZE:1024000}
spring.websocket.buffer-size-limit=${WEBSOCKET_BUFFER_SIZE:1024000}

# Application Configuration
# CORS Configuration
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:3001,http://localhost:5173,http://localhost:8081}

# Soul Echo specific configurations
soul-echo.max-conversation-history=${SOUL_ECHO_MAX_HISTORY:50}
soul-echo.audio-chunk-size=${SOUL_ECHO_AUDIO_CHUNK_SIZE:4096}
soul-echo.session-timeout=${SOUL_ECHO_SESSION_TIMEOUT:1800}

# File Upload Configuration
soul-echo.file.upload-path=${FILE_UPLOAD_PATH:/var/lib/soul-echo/uploads}
soul-echo.file.max-size=${MAX_FILE_SIZE:10MB}

# Security Configuration
soul-echo.security.jwt-secret=${JWT_SECRET:please-change-this-in-production}
soul-echo.security.encryption-key=${ENCRYPTION_KEY:please-change-this-in-production}

# Logging Configuration
logging.level.com.dotlinea.soulecho=${LOG_LEVEL_APP:INFO}
logging.level.org.springframework.web.socket=${LOG_LEVEL_WEBSOCKET:WARN}
logging.pattern.console=${LOG_PATTERN:%d{yyyy-MM-dd HH:mm:ss} - %msg%n}

# External AI Services Configuration
# ASR Service Configuration
asr.service.url=${ASR_SERVICE_URL:wss://nls-gateway.cn-shanghai.aliyuncs.com/ws/v1}
asr.api.key=${ASR_API_KEY:}
asr.api.secret=${ASR_API_SECRET:}
asr.app.key=${ASR_APP_KEY:}

# LLM Service Configuration
llm.api.key=${LLM_API_KEY:}
llm.model=${LLM_MODEL:qwen-plus}
llm.max.tokens=${LLM_MAX_TOKENS:2000}
llm.temperature=${LLM_TEMPERATURE:0.8}

# TTS Service Configuration
tts.service.url=${TTS_SERVICE_URL:wss://nls-gateway.cn-shanghai.aliyuncs.com/ws/v1}
tts.api.key=${TTS_API_KEY:}
tts.api.secret=${TTS_API_SECRET:}
tts.app.key=${TTS_APP_KEY:}
tts.voice=${TTS_VOICE:xiaoyun}
tts.format=${TTS_FORMAT:pcm}
tts.sample.rate=${TTS_SAMPLE_RATE:16000}

# Bailian Knowledge Service Configuration
bailian.workspace.id=${BAILIAN_WORKSPACE_ID:}
bailian.knowledge.index.id=${BAILIAN_INDEX_ID:}
bailian.api.key=${BAILIAN_API_KEY:}

# Redis Configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.database=${REDIS_DATABASE:0}
spring.data.redis.timeout=${REDIS_TIMEOUT:3000ms}

# Mail Configuration (if needed)
spring.mail.host=${MAIL_HOST:smtp.example.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
soul-echo.mail.from=${MAIL_FROM:noreply@soul-echo.com}